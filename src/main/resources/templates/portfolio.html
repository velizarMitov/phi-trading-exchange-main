<div th:replace="layout/main :: layout(~{::section})" xmlns:th="http://www.thymeleaf.org">
    <section>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
            <h2 class="h1" style="margin: 0;">ðŸ’¼ My Portfolio</h2>
            <a class="btn btn-primary" th:href="@{/trade/buy}">âž• Add Position</a>
        </div>

        <div class="grid cols-3 mb-4">
            <div class="card hoverable">
                <div class="muted mb-1" style="font-weight: 600;">ðŸ“Š Total Value</div>
                <div class="h1" style="color: #667eea;" th:text="${totalValue} ?: '$0.00'">$0.00</div>
            </div>
            <div class="card hoverable">
                <div class="muted mb-1" style="font-weight: 600;">ðŸ“ˆ Total Gain/Loss</div>
                <div class="h1" style="color: #48bb78;" th:text="${totalGainLoss} ?: '$0.00'">$0.00</div>
            </div>
            <div class="card hoverable">
                <div class="muted mb-1" style="font-weight: 600;">ðŸŽ¯ Return %</div>
                <div class="h1" style="color: #764ba2;" th:text="${returnPercent} ?: '0%'">0%</div>
            </div>
        </div>

        <div class="card">
            <h3 class="h2 mb-4">Your Holdings</h3>
            <div th:if="${positions != null and !positions.isEmpty()}">
                <div class="table-wrapper">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Quantity</th>
                                <th>Avg Price</th>
                                <th>Current Price</th>
                                <th>Total Value</th>
                                <th>Gain/Loss</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="pos : ${positions}">
                                <td><strong th:text="${pos.symbol}">AAPL</strong></td>
                                <td th:text="${pos.quantity}">10</td>
                                <td th:text="${pos.avgPrice}">$150.00</td>
                                <td th:text="${pos.currentPrice}">$160.00</td>
                                <td th:text="${pos.totalValue}">$1,600.00</td>
                                <td>
                                    <span class="badge success" th:if="${pos.gainLoss > 0}" th:text="${pos.gainLoss}">+$100</span>
                                    <span class="badge canceled" th:if="${pos.gainLoss < 0}" th:text="${pos.gainLoss}">-$50</span>
                                    <span class="badge pending" th:if="${pos.gainLoss == 0}">$0.00</span>
                                </td>
                                <td>
                                    <a class="btn btn-danger" style="padding: 8px 16px; font-size: 0.9rem;" th:href="@{/trade/sell(symbol=${pos.symbol})}">Sell</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div th:if="${positions == null or positions.isEmpty()}" style="text-align: center; padding: 60px 24px;">
                <div style="font-size: 5rem; margin-bottom: 16px; opacity: 0.3;">ðŸ“Š</div>
                <p class="muted" style="font-size: 1.2rem;">Your portfolio is empty</p>
                <p class="muted">Start building your investment portfolio today</p>
                <a class="btn btn-primary mt-3" th:href="@{/trade/buy}">ðŸš€ Start Trading</a>
            </div>
        </div>
    </section>
</div>

